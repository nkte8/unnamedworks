---
import { getCollection, getEntryBySlug } from 'astro:content';
// 1. コレクションエントリーごとに新しいパスを生成


export async function getStaticPaths() {
  const blogEntries = await getCollection('posts');
  let aroud_info:any = [];
  let staticPaths:any = [];

  let sorted = blogEntries.sort(
    (a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime()
  );

  aroud_info = sorted.map(entry => {
    return {
      slug: entry.slug,
      title: entry.data.title,
    }
  })

  return sorted.map((entry,index) => ({
    params:{
      slug: entry.slug
    },
    props: {
      entry,
      prev: aroud_info[index +1],
      next: aroud_info[index -1]
    }
  }))
}

const { entry, prev, next } = Astro.props;
const { Content } = await entry.render();
import '../styles/pagelist.css'
---
<Content />
<div class="pagelist-buttons">
  <div class="left">{next !== undefined && <a href={next.slug}>&lt; {next.title}</a>}</div>
  <div class="center">{entry.data.title}</div>
  <div class="right">{prev !== undefined && <a href={prev.slug}>{prev.title} &gt;</a>}</div>
</div>