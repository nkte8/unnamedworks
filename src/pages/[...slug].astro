---
import { getAllPosts, genPostSlug } from "@/utils/newt.ts";
import Data from "@/utils/model/postformat.json";
type Post = typeof Data;

export async function getStaticPaths() {
    const response = await getAllPosts();
    const posts: Post[] = response?.items;

    return posts.map((entry, index) => ({
        params: {
            slug: baseurl + genPostSlug(entry.pubDate, entry._sys.createdAt),
        },
        props: {
            entry,
            prev: posts[index + 1],
            next: posts[index - 1],
        },
    }));
}

interface Props {
    entry: Post;
    prev: Post | undefined;
    next: Post | undefined;
}
const { entry, prev, next } = Astro.props;

import Pagerender from "@/layouts/Pagerender.astro";

import { baseurl } from "@/utils/vars.ts";
---
<Pagerender entry={entry} prev={prev} next={next} baseurl={baseurl} />
